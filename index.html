<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>PÅ™eÅ¾ij prochÃ¡zku s Kubou â€“ INISS Beroun/Rokycany</title>

<style>
body {
  background:#121212;
  color:#eee;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:20px;
}

#game {
  max-width:900px;
  margin:auto;
  background:#1f1f1f;
  padding:20px;
  border-radius:10px;
}

.stats, .level {
  margin-bottom:10px;
  font-weight:bold;
  font-size:18px;
}

.chat {
  background:#0b0b0b;
  padding:15px;
  border-radius:8px;
  height:340px;
  overflow-y:auto;
  text-align:left;
  margin-bottom:15px;
  font-size:22px;
  line-height:1.6;
}

.chat p {
  margin:8px 0;
}

.you { color:#4fc3f7; }
.kuba { color:#ff6b6b; }
.iniss { color:#ffd166; font-style:italic; }

button {
  padding:12px 18px;
  margin:6px;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>
<div id="game">
  <h1>ğŸš¶â€â™‚ï¸ PÅ™eÅ¾ij prochÃ¡zku s Kubou</h1>

  <div class="level">
    ğŸ“ ÃšroveÅˆ <span id="level">1</span> / <span id="max">7</span>
  </div>

  <div class="stats">
    â¤ï¸ HP: <span id="hp">3</span> |
    ğŸ§  Nervy: <span id="nerves">5</span>
  </div>

  <div class="chat" id="chat"></div>
  <div id="choices"></div>
</div>

<script>
let hp = 3;
let nerves = 5;
let stage = 0;

const chat = document.getElementById("chat");
const choicesEl = document.getElementById("choices");
const hpEl = document.getElementById("hp");
const nervesEl = document.getElementById("nerves");
const levelEl = document.getElementById("level");
const maxEl = document.getElementById("max");

function add(text, cls) {
  chat.innerHTML += `<p class="${cls}">${text}</p>`;
  chat.scrollTop = chat.scrollHeight;
}

function updateStats() {
  hpEl.textContent = hp;
  nervesEl.textContent = nerves;
  levelEl.textContent = stage + 1;
}

/* ===== INISS â€“ BEROUN & ROKYCANY ===== */
const INISS = [
  "HlÃ¡Å¡enÃ­ pro cestujÃ­cÃ­: OsobnÃ­ vlak do Berouna odjede z koleje ÄÃ­slo dvÄ›.",
  "UpozorÅˆujeme cestujÃ­cÃ­, Å¾e vlak ve smÄ›ru Zdice mÃ¡ zpoÅ¾dÄ›nÃ­ pÅ™ibliÅ¾nÄ› deset minut.",
  "Vlak bude opoÅ¾dÄ›n z provoznÃ­ch dÅ¯vodÅ¯ v Ãºseku HoÅ™ovice â€“ Zdice.",
  "OsobnÃ­ vlak do Rokycan ukonÄÃ­ jÃ­zdu ve stanici Beroun.",
  "Dbejte zvÃ½Å¡enÃ© opatrnosti pÅ™i pÅ™echÃ¡zenÃ­ kolejÃ­ ve stanici Zdice.",
  "HlÃ¡Å¡enÃ­ pro cestujÃ­cÃ­: Ve stanici KaÅ™Ã­zek dojde ke zmÄ›nÄ› nÃ¡stupiÅ¡tÄ›.",
  "UpozorÅˆujeme cestujÃ­cÃ­, Å¾e ve stanici HoÅ™ovice nebude zajiÅ¡tÄ›n pÅ™estup.",
  "OsobnÃ­ vlak ve smÄ›ru Rokycany je opoÅ¾dÄ›n z dÅ¯vodu kÅ™iÅ¾ovÃ¡nÃ­ vlakÅ¯."
];

function randomINISS() {
  return INISS[Math.floor(Math.random() * INISS.length)];
}

/* ===== ÃšROVNÄš â€“ KUBÅ®V HOVOR ===== */
const stages = [
{
  intro: "Kuba hned po vÃ½stupu vytahuje mobil a koukÃ¡ kolem sebe.",
  choices: [
    {
      you: "To fakt musÃ­Å¡ nahrÃ¡vat hned?",
      result: () => {
        add("Kuba: â€Jo, tady je to dobrÃ½.â€œ", "kuba");
        add("Kuba: â€Ten zvuk se mÅ¯Å¾e hodit.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves--;
      }
    },
    {
      you: "Zase ty hlÃ¡Å¡enÃ­?",
      result: () => {
        add("Kuba: â€VÅ¾dyÅ¥ to slyÅ¡Ã­Å¡ sÃ¡m.â€œ", "kuba");
        add("Kuba: â€Tohle je pÄ›knÃ½ mÃ­sto.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves -= 2;
      }
    }
  ]
},

{
  intro: "Cesta se zuÅ¾uje, Kuba jde skoro u kraje.",
  choices: [
    {
      you: "Hele, pojÄ radÅ¡i vÃ­c ke mnÄ›.",
      result: () => {
        add("Kuba: â€V pohodÄ›, tady chodÃ­m furt.â€œ", "kuba");
        add("Kuba: â€Nic tu nejezdÃ­.â€œ", "kuba");
        add(randomINISS(), "iniss");
        hp--;
      }
    },
    {
      you: "Jestli spadneÅ¡, tak tÄ› tahat nebudu.",
      result: () => {
        add("Kuba: â€JÃ¡ nespadnu.â€œ", "kuba");
        add("Kuba: â€To by byl pech.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves--;
      }
    }
  ]
},

{
  intro: "BlÃ¡to, kaluÅ¾e a rozjeÅ¾dÄ›nÃ¡ stezka.",
  choices: [
    {
      you: "Tudy se fakt jÃ­t nedÃ¡.",
      result: () => {
        add("Kuba: â€Ale jo, jen se nesmÃ­Å¡ bÃ¡t.â€œ", "kuba");
        add("Kuba: â€Vlaky se tady taky brodÃ­.â€œ", "kuba");
        add(randomINISS(), "iniss");
        hp--;
      }
    },
    {
      you: "Nemohli jsme jÃ­t normÃ¡lnÄ› po cestÄ›?",
      result: () => {
        add("Kuba: â€Tam nic neuslyÅ¡Ã­Å¡.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves--;
      }
    }
  ]
},

{
  intro: "ZaÄne prÅ¡et. Kuba se ani nezastavÃ­.",
  choices: [
    {
      you: "TobÄ› ten dÃ©Å¡Å¥ nevadÃ­?",
      result: () => {
        add("Kuba: â€AspoÅˆ to nenÃ­ suchÃ½.â€œ", "kuba");
        add("Kuba: â€Je to lepÅ¡Ã­ zvuk.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves -= 2;
      }
    },
    {
      you: "MnÄ› uÅ¾ z toho huÄÃ­ v hlavÄ›.",
      result: () => {
        add("Kuba: â€To pÅ™ejde.â€œ", "kuba");
        add("Kuba: â€MnÄ› to dÄ›lÃ¡ furt.â€œ", "kuba");
        add(randomINISS(), "iniss");
        hp--;
      }
    }
  ]
},

{
  intro: "ZakopneÅ¡ o kÃ¡men, Kuba se otoÄÃ­ jen napÅ¯l.",
  choices: [
    {
      you: "Pomoz mi vstÃ¡t!",
      result: () => {
        add("Kuba: â€PoÄkej chvilku.â€œ", "kuba");
        add("Kuba: â€TeÄ to zrovna hlÃ¡sÃ­.â€œ", "kuba");
        add(randomINISS(), "iniss");
        hp--;
        nerves--;
      }
    },
    {
      you: "Ty mÃ¡Å¡ fakt priority.",
      result: () => {
        add("Kuba: â€VÅ¾dyÅ¥ uÅ¾ jdeÅ¡.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves--;
      }
    }
  ]
},

{
  intro: "Kuba koukÃ¡ na displej.",
  choices: [
    {
      you: "Tak co, kolik mÃ¡Å¡ baterky?",
      result: () => {
        add("Kuba: â€DvÄ› procenta.â€œ", "kuba");
        add("Kuba: â€To jeÅ¡tÄ› chvÃ­li vydrÅ¾Ã­.â€œ", "kuba");
        nerves++;
      }
    },
    {
      you: "Tak uÅ¾ to vypni.",
      result: () => {
        add("Kuba: â€TeÄ uÅ¾ ne.â€œ", "kuba");
        add("Kuba: â€To by byla Å¡koda.â€œ", "kuba");
        add(randomINISS(), "iniss");
        nerves--;
      }
    }
  ]
},

{
  intro: "DoÅ¡li jste k silnici. Je ticho.",
  choices: [
    {
      you: "Takâ€¦ uÅ¾ jdeme domÅ¯?",
      result: () => {
        add("Kuba: â€Jo, pro dneÅ¡ek staÄilo.â€œ", "kuba");
        add("Kuba: â€ZÃ­tra se mÅ¯Å¾e jÃ­t znova.â€œ", "kuba");
      }
    }
  ]
}
];

maxEl.textContent = stages.length;

function endGame(msg) {
  add(msg, "kuba");
  choicesEl.innerHTML = `<button onclick="location.reload()">HrÃ¡t znovu</button>`;
}

function nextStage() {
  if (hp <= 0) return endGame("ğŸ’€ Kuba: â€No joâ€¦ hlavnÄ› Å¾e to Å¡lo slyÅ¡et.â€œ");
  if (nerves <= 0) return endGame("ğŸ¤¯ Kuba: â€Asi uÅ¾ toho mÃ¡Å¡ dost.â€œ");
  if (stage >= stages.length) return endGame("ğŸ† Kuba: â€Tak zÃ­tra tÅ™eba HoÅ™ovice.â€œ");

  updateStats();
  const s = stages[stage];

  add(`<strong>â€” ÃšROVEÅ‡ ${stage + 1} â€”</strong>`, "iniss");
  add("Kuba: " + s.intro, "kuba");

  choicesEl.innerHTML = "";
  s.choices.forEach(c => {
    const b = document.createElement("button");
    b.textContent = c.you;
    b.onclick = () => {
      choicesEl.innerHTML = "";
      add("Ty: " + c.you, "you");
      c.result();
      updateStats();

      const nextBtn = document.createElement("button");
      nextBtn.textContent = "â–¶ PokraÄovat";
      nextBtn.onclick = () => {
        stage++;
        nextStage();
      };
      choicesEl.appendChild(nextBtn);
    };
    choicesEl.appendChild(b);
  });
}

add("Kuba: â€Nazdar. PÅ¯jdeme se jen projÃ­t.â€œ", "kuba");
add("Kuba: â€StejnÄ› je to kousek.â€œ", "kuba");
nextStage();
</script>
</body>
</html>
