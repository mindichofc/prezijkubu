<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>PÅ™eÅ¾ij prochÃ¡zku â€“ Kuba & Libor</title>

<style>
body {
  background:#121212;
  color:#eee;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:20px;
}

#game {
  max-width:900px;
  margin:auto;
  background:#1f1f1f;
  padding:20px;
  border-radius:10px;
}

.stats, .level {
  margin-bottom:10px;
  font-weight:bold;
  font-size:18px;
}

.chat {
  background:#0b0b0b;
  padding:15px;
  border-radius:8px;
  height:360px;
  overflow-y:auto;
  text-align:left;
  margin-bottom:15px;
  font-size:22px;
  line-height:1.6;
}

.chat p { margin:8px 0; }

.you { color:#4fc3f7; }
.kuba { color:#ff6b6b; }
.libor { color:#6bcf95; }
.train { color:#ffd166; font-style:italic; }
.bus { color:#cdb4db; font-style:italic; }

button {
  padding:12px 18px;
  margin:6px;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>
<div id="game">
  <h1>ğŸš¶â€â™‚ï¸ PÅ™eÅ¾ij prochÃ¡zku</h1>

  <div id="menu">
    <p>Vyber reÅ¾im:</p>
    <button onclick="startGame('kuba')">ProchÃ¡zka s Kubou</button>
    <button onclick="startGame('kubaLibor')">ProchÃ¡zka s Kubou a Liborem</button>
  </div>

  <div id="hud" style="display:none">
    <div class="level">
      ğŸ“ ÃšroveÅˆ <span id="level">1</span> / <span id="max">7</span>
    </div>
    <div class="stats">
      â¤ï¸ HP: <span id="hp">3</span> |
      ğŸ§  Nervy: <span id="nerves">5</span>
    </div>
  </div>

  <div class="chat" id="chat"></div>
  <div id="choices"></div>
</div>

<script>
let hp, nerves, stage, mode;

const chat = document.getElementById("chat");
const choicesEl = document.getElementById("choices");
const hpEl = document.getElementById("hp");
const nervesEl = document.getElementById("nerves");
const levelEl = document.getElementById("level");
const maxEl = document.getElementById("max");
const menu = document.getElementById("menu");
const hud = document.getElementById("hud");

function add(text, cls) {
  chat.innerHTML += `<p class="${cls}">${text}</p>`;
  chat.scrollTop = chat.scrollHeight;
}

function updateStats() {
  hpEl.textContent = hp;
  nervesEl.textContent = nerves;
  levelEl.textContent = stage + 1;
}

/* ===== HLÃÅ ENÃ ===== */

// VLaky â€“ Kuba (Beroun / Rokycany)
const TRAIN = [
  "HlÃ¡Å¡enÃ­ pro cestujÃ­cÃ­: OsobnÃ­ vlak do Berouna odjede z koleje ÄÃ­slo dvÄ›.",
  "UpozorÅˆujeme cestujÃ­cÃ­, Å¾e vlak ve smÄ›ru Zdice mÃ¡ zpoÅ¾dÄ›nÃ­ deset minut.",
  "Vlak bude opoÅ¾dÄ›n v Ãºseku HoÅ™ovice â€“ Zdice.",
  "OsobnÃ­ vlak do Rokycan ukonÄÃ­ jÃ­zdu ve stanici Beroun.",
  "Dbejte zvÃ½Å¡enÃ© opatrnosti pÅ™i pohybu v kolejiÅ¡ti ve stanici Zdice."
];

// Autobusy PID â€“ Libor
const BUS = [
  "Linka 637 smÄ›r Beroun, autobusovÃ© nÃ¡draÅ¾Ã­, zpoÅ¾dÄ›nÃ­ pÄ›t minut.",
  "UpozorÅˆujeme cestujÃ­cÃ­, Å¾e spoj linky 633 vyÄkÃ¡ pÅ™Ã­poje.",
  "ZastÃ¡vka Zdice, nÃ¡mÄ›stÃ­ â€“ vÃ½stup pÅ™ednÃ­mi dveÅ™mi.",
  "Spoj do HoÅ™ovic je opoÅ¾dÄ›n z dÅ¯vodu silnÃ©ho provozu.",
  "KoneÄnÃ¡ stanice Beroun, autobusovÃ© nÃ¡draÅ¾Ã­."
];

function random(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

/* ===== REÅ½IM: PROCHÃZKA S KUBOU (7 ÃšROVNÃ) ===== */

const stagesKuba = [
{
  intro: "Kuba hned po vÃ½stupu vytahuje mobil.",
  choices: [
    {
      you: "Zase hlÃ¡Å¡enÃ­?",
      result: () => {
        add("Kuba: â€Jo, teÄ je to dobrÃ½.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    },
    {
      you: "Nemohlo by bÃ½t chvÃ­li ticho?",
      result: () => {
        add("Kuba: â€To by byla Å¡koda.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves -= 2;
      }
    }
  ]
},
{
  intro: "Cesta se zuÅ¾uje, Kuba jde skoro u kraje.",
  choices: [
    {
      you: "PojÄ radÅ¡i vÃ­c ke mnÄ›.",
      result: () => {
        add("Kuba: â€V pohodÄ›, tady chodÃ­m furt.â€œ", "kuba");
        add(random(TRAIN), "train");
        hp--;
      }
    },
    {
      you: "Jestli spadneÅ¡, tak tÄ› tahat nebudu.",
      result: () => {
        add("Kuba: â€To by byla smÅ¯la.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    }
  ]
},
{
  intro: "BlÃ¡to a kaluÅ¾e, Kuba se nezastavuje.",
  choices: [
    {
      you: "Tudy se jÃ­t nedÃ¡.",
      result: () => {
        add("Kuba: â€Ale jo, to projde.â€œ", "kuba");
        add(random(TRAIN), "train");
        hp--;
      }
    },
    {
      you: "Nemohli jsme jÃ­t normÃ¡lnÄ›?",
      result: () => {
        add("Kuba: â€Tam nic nenÃ­ slyÅ¡et.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    }
  ]
},
{
  intro: "ZaÄne prÅ¡et.",
  choices: [
    {
      you: "TobÄ› to nevadÃ­?",
      result: () => {
        add("Kuba: â€AspoÅˆ to nenÃ­ suchÃ½.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves -= 2;
      }
    },
    {
      you: "MnÄ› uÅ¾ z toho huÄÃ­ v hlavÄ›.",
      result: () => {
        add("Kuba: â€To pÅ™ejde.â€œ", "kuba");
        add(random(TRAIN), "train");
        hp--;
      }
    }
  ]
},
{
  intro: "ZakopneÅ¡ o kÃ¡men.",
  choices: [
    {
      you: "Pomoz mi!",
      result: () => {
        add("Kuba: â€PoÄkej, teÄ to hlÃ¡sÃ­.â€œ", "kuba");
        add(random(TRAIN), "train");
        hp--;
        nerves--;
      }
    },
    {
      you: "Ty mÃ¡Å¡ fakt priority.",
      result: () => {
        add("Kuba: â€No jo.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    }
  ]
},
{
  intro: "Kuba koukÃ¡ na mobil.",
  choices: [
    {
      you: "Kolik mÃ¡Å¡ baterky?",
      result: () => {
        add("Kuba: â€DvÄ› procenta.â€œ", "kuba");
        add("Kuba: â€To jeÅ¡tÄ› vydrÅ¾Ã­.â€œ", "kuba");
        nerves++;
      }
    },
    {
      you: "Tak to vypni.",
      result: () => {
        add("Kuba: â€TeÄ uÅ¾ ne.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    }
  ]
},
{
  intro: "DoÅ¡li jste k silnici. Je ticho.",
  choices: [
    {
      you: "Tak uÅ¾ jdeme domÅ¯?",
      result: () => {
        add("Kuba: â€Jo, pro dneÅ¡ek staÄilo.â€œ", "kuba");
      }
    }
  ]
}
];

/* ===== REÅ½IM: KUBA + LIBOR ===== */

const stagesKubaLibor = [
{
  intro: "Kuba i Libor se zastavÃ­ skoro zÃ¡roveÅˆ.",
  choices: [
    {
      you: "To snad ne oba dvaâ€¦",
      result: () => {
        add("Kuba: â€PoÄkej, teÄ to hlÃ¡sÃ­.â€œ", "kuba");
        add(random(TRAIN), "train");
        add("Libor: â€No jo, autobus taky.â€œ", "libor");
        add(random(BUS), "bus");
        nerves -= 2;
      }
    },
    {
      you: "AspoÅˆ se domluvte.",
      result: () => {
        add("Libor: â€JÃ¡ jedu prvnÃ­.â€œ", "libor");
        add(random(BUS), "bus");
        add("Kuba: â€Tak hned po tobÄ›.â€œ", "kuba");
        add(random(TRAIN), "train");
        nerves--;
      }
    }
  ]
}
];

/* ===== HRA ===== */

function startGame(selectedMode) {
  mode = selectedMode;
  hp = 3;
  nerves = 5;
  stage = 0;

  chat.innerHTML = "";
  choicesEl.innerHTML = "";
  menu.style.display = "none";
  hud.style.display = "block";

  const stages = mode === "kuba" ? stagesKuba : stagesKubaLibor;
  maxEl.textContent = stages.length;

  add("Ty: â€Tak jdemeâ€¦â€œ", "you");
  if (mode === "kuba") {
    add("Kuba: â€Jen se projÃ­t.â€œ", "kuba");
  } else {
    add("Kuba: â€Jen se projÃ­t.â€œ", "kuba");
    add("Libor: â€StejnÄ› tu nÄ›co pojede.â€œ", "libor");
  }

  nextStage();
}

function endGame(msg) {
  add(msg, "kuba");
  choicesEl.innerHTML = `<button onclick="location.reload()">HrÃ¡t znovu</button>`;
}

function nextStage() {
  if (hp <= 0) return endGame("ğŸ’€ â€No joâ€¦â€œ");
  if (nerves <= 0) return endGame("ğŸ¤¯ â€To uÅ¾ staÄilo.â€œ");

  const stages = mode === "kuba" ? stagesKuba : stagesKubaLibor;
  if (stage >= stages.length) return endGame("ğŸ† â€Tak zas nÄ›kdy.â€œ");

  updateStats();
  const s = stages[stage];

  add(`<strong>â€” ÃšROVEÅ‡ ${stage + 1} â€”</strong>`, "train");
  add("Kuba: " + s.intro, "kuba");

  choicesEl.innerHTML = "";
  s.choices.forEach(c => {
    const b = document.createElement("button");
    b.textContent = c.you;
    b.onclick = () => {
      choicesEl.innerHTML = "";
      add("Ty: " + c.you, "you");
      c.result();
      updateStats();
      const nextBtn = document.createElement("button");
      nextBtn.textContent = "â–¶ PokraÄovat";
      nextBtn.onclick = () => { stage++; nextStage(); };
      choicesEl.appendChild(nextBtn);
    };
    choicesEl.appendChild(b);
  });
}
</script>
</body>
</html>
